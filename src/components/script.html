<script src="./js/scripts.js"></script>
<script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('data', () => ({}));
  });

  document.addEventListener('DOMContentLoaded', () => {
    // const options = {
    //     inputMode: true,
    //     positionToInput: 'auto',
    //     onChangeToInput(self) {
    //         if (!self.context.inputElement) return;
    //         if (self.context.selectedDates[0]) {
    //             self.context.inputElement.value = self.context.selectedDates[0];
    //             // if you want to hide the calendar after picking a date
    //             self.hide();
    //         } else {
    //             self.context.inputElement.value = '';
    //         }
    //     },
    // };
    // // Деструктуризация конструктора Calendar
    // const { Calendar } = window.VanillaCalendarPro;
    // // Создайте экземпляр календаря и инициализируйте его.
    // const calendarInput = new Calendar('#calendar', options);
    // calendarInput.init();

    const calendarInput = document.getElementById('calendar');
    const calendarContainer = document.getElementById('calendar-container');
    const calendarElement = document.getElementById('vanilla-calendar');
    const timePicker = document.getElementById('time-picker');
    const timeOptions = document.getElementById('time-options');
    const { Calendar } = window.VanillaCalendarPro;

// Инициализация календаря
    const calendar = new Calendar(calendarElement, {
      selectedTheme: 'light',
      settings: {
        lang: 'en',
        iso8601: true,
        selection: {
          day: 'single',
        },
      },
      onClickDate(self) {
        const selectedDate = self.context.selectedDates; // Получаем выбранную дату
        calendarInput.value = selectedDate; // Устанавливаем дату в инпут
        showTimePicker(); // Показываем выбор времени
      },
    });

// Показываем контейнер с календарём при клике на инпут
    calendarInput.addEventListener('click', (event) => {
      calendarContainer.style.display = 'flex'; // Показываем контейнер
      calendarContainer.style.top = `50px`;
      calendarContainer.style.left = `0px`;
    });

// Скрываем контейнер при клике вне его
    document.addEventListener('click', (event) => {
      if (
        !calendarContainer.contains(event.target) && // Если клик вне календаря
        event.target !== calendarInput // И не по самому инпуту
      ) {
        calendarContainer.style.display = 'none'; // Скрываем контейнер
      }
    });

// Показываем выбор времени
    function showTimePicker() {
      generateTimeSlots(); // Генерируем слоты времени
    }

// Генерация временных слотов
    function generateTimeSlots() {
      timeOptions.innerHTML = ''; // Очищаем предыдущие слоты
      const times = [
        '09:00', '10:00', '11:00', '12:00', '13:00',
      ];

      times.forEach((time) => {
        const timeButton = document.createElement('button');
        timeButton.textContent = time;
        timeButton.classList.add('time-slot');
        timeButton.addEventListener('click', () => {
          const currentValue = calendarInput.value.split(' ')[0]; // Извлекаем дату без времени
          calendarInput.value = `${currentValue} ${time}`; // Добавляем новое время
          calendarContainer.style.display = 'none'; // Скрываем контейнер
        });
        timeOptions.appendChild(timeButton);
      });
    }

// Инициализация календаря
    calendar.init();
  });
</script>